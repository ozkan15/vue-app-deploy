(function(e){function t(t){for(var a,o,l=t[0],i=t[1],u=t[2],p=0,d=[];p<l.length;p++)o=l[p],s[o]&&d.push(s[o][0]),s[o]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);c&&c(t);while(d.length)d.shift()();return n.push.apply(n,u||[]),r()}function r(){for(var e,t=0;t<n.length;t++){for(var r=n[t],a=!0,l=1;l<r.length;l++){var i=r[l];0!==s[i]&&(a=!1)}a&&(n.splice(t--,1),e=o(o.s=r[0]))}return e}var a={},s={app:0},n=[];function o(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=a,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(r,a,function(t){return e[t]}.bind(null,a));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=i;n.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("1356"),s=r.n(a);s.a},1356:function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);var a=r("2b0e"),s=r("bb71");r("da64");a["a"].use(s["a"],{iconfont:"md"});r("f9e3"),r("2dd8");var n=r("8c4f"),o=r("bc3a"),l=r.n(o),i=r("a7fe"),u=r.n(i),c=r("9f7b"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[r("v-toolbar",{attrs:{app:""}},[r("v-toolbar-title",[e._v("DEMO")]),r("v-spacer"),r("v-toolbar-items",{staticClass:"hidden-sm-and-down"},[e.loggedIn?e._e():r("v-btn",{attrs:{flat:""}},[r("router-link",{staticClass:"links",attrs:{to:"/login"}},[e._v("LOGIN")])],1),e.loggedIn?e._e():r("v-btn",{attrs:{flat:""}},[r("router-link",{staticClass:"links",attrs:{to:"/register"}},[e._v("REGISTER")])],1),e.loggedIn?r("v-btn",{attrs:{flat:""},on:{click:e.logout}},[e._v("LOGOUT")]):e._e(),e.loggedIn?r("v-btn",{attrs:{flat:""}},[r("router-link",{staticClass:"links",attrs:{to:"/userlist"}},[e._v("USERLIST")])],1):e._e()],1)],1),r("v-content",[r("router-view")],1),r("v-footer",{attrs:{height:"auto",color:"primary lighten-1"}},[r("v-layout",{attrs:{"justify-center":"",row:"",wrap:""}},[e._l(e.links,function(t){return r("v-btn",{key:t,attrs:{color:"white",flat:"",round:""}},[e._v("\n      "+e._s(t)+"\n    ")])}),r("v-flex",{attrs:{primary:"","lighten-2":"","py-3":"","text-xs-center":"","white--text":"",xs12:""}},[e._v("\n      ©2018 — "),r("strong",[e._v("demo")])])],2)],1)],1)},d=[],m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-content",[r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-title",[e._v("Login form")])],1),r("v-card-text",[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[r("v-text-field",{attrs:{"prepend-icon":"person",name:"username-email",label:"Username",type:"text",rules:e.usernameRules},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Password",type:"password",rules:e.passwordRules,required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:e.login}},[e._v("Login")])],1),r("v-alert",{attrs:{value:e.alert_error,type:"error"}},[e._v("\r\n              Username/password invalid\r\n              ")])],1)],1)],1)],1)],1)},v=[],f={name:"login",data(){return{username:"",usernameRules:[e=>!!e||"Username is required"],password:"",passwordRules:[e=>!!e||"Password is required"],alert_error:!1}},methods:{login(){this.$refs.form.validate()&&this.$store.dispatch("login",{username:this.username,password:this.password}).then(()=>{this.$router.push("/userlist")}).catch(()=>{this.alert_error=!0})}}},h=f,g=r("2877"),b=r("6544"),_=r.n(b),w=r("0798"),y=r("8336"),k=r("b0af"),x=r("99d9"),V=r("a523"),S=r("549c"),T=r("0e8f"),I=r("4bd4"),R=r("a722"),C=r("9910"),E=r("2677"),$=r("71d9"),O=r("2a7f"),j=Object(g["a"])(h,m,v,!1,null,null,null);j.options.__file="login.vue";var P=j.exports;_()(j,{VAlert:w["a"],VBtn:y["a"],VCard:k["a"],VCardActions:x["a"],VCardText:x["b"],VContainer:V["a"],VContent:S["a"],VFlex:T["a"],VForm:I["a"],VLayout:R["a"],VSpacer:C["a"],VTextField:E["a"],VToolbar:$["a"],VToolbarTitle:O["b"]});var q=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-content",[r("v-container",{attrs:{fluid:"","fill-height":""}},[r("v-layout",{attrs:{"align-center":"","justify-center":""}},[r("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[r("v-card",{staticClass:"elevation-12"},[r("v-toolbar",{attrs:{dark:"",color:"primary"}},[r("v-toolbar-title",[e._v("Registration Form")])],1),r("v-card-text",[r("v-form",{ref:"form",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[r("v-text-field",{attrs:{"prepend-icon":"person",name:"name",label:"Name",type:"text",rules:e.nameRules,required:""},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}}),r("v-text-field",{attrs:{"prepend-icon":"person",name:"username",label:"User Name",type:"text",rules:e.usernameRules,counter:10,required:""},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),r("v-text-field",{attrs:{"prepend-icon":"person",name:"email",label:"Email",type:"text",rules:e.emailRules,required:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),r("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Password",type:"password",rules:e.passwordRules,required:""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{color:"primary"},on:{click:e.register}},[e._v("REGISTER")])],1),r("v-alert",{attrs:{value:e.alert_error,type:"error"}},[e._v("\r\n              "+e._s(e.error_type)+"\r\n              ")]),r("v-alert",{attrs:{value:e.alert_success,type:"success"}},[e._v("\r\n              Registration successful  "),r("router-link",{attrs:{to:"/login"}},[e._v(" Login Your Account")])],1)],1)],1)],1)],1)],1)},U=[],L={name:"register",data(){return{name:"",nameRules:[e=>!!e||"Name is required"],username:"",usernameRules:[e=>!!e||"Name is required",e=>e.length<=10||"Username must be less than 10 characters"],email:"",emailRules:[e=>!!e||"email is required"],password:"",passwordRules:[e=>!!e||"password is required",e=>e.length<=10||"Name must be less than 10 characters"],alert_success:!1,alert_error:!1,error_type:""}},methods:{register(){this.$refs.form.validate()&&this.$store.dispatch("register",{name:this.name,username:this.username,email:this.email,password:this.password}).then(()=>(this.alert_success=!0,this.alert_error=!1)).catch(e=>{this.alert_error=!0,this.alert_success=!1,400==e.response.status?this.error_type="Invalid email":this.error_type="User already exist"})}}},A=L,F=Object(g["a"])(A,q,U,!1,null,null,null);F.options.__file="register.vue";var N=F.exports;_()(F,{VAlert:w["a"],VBtn:y["a"],VCard:k["a"],VCardActions:x["a"],VCardText:x["b"],VContainer:V["a"],VContent:S["a"],VFlex:T["a"],VForm:I["a"],VLayout:R["a"],VSpacer:C["a"],VTextField:E["a"],VToolbar:$["a"],VToolbarTitle:O["b"]});var B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-content",[r("b-table",{attrs:{responsive:"",striped:"",hover:"",items:e.users[0],fields:e.fields},scopedSlots:e._u([{key:"action",fn:function(t){return[r("b-button",{staticClass:"mr-2",attrs:{size:"sm"},on:{click:function(r){e.deleteUser(t.item._id)}}},[e._v("\r\n       DELETE USER\r\n      ")])]}}])})],1)},M=[],D={name:"userList",data(){return{users:[],fields:[{key:"name",label:"Name"},{key:"username",label:"Username"},{key:"email",label:"Email"},{key:"action",label:"Action"}]}},mounted(){this.$store.dispatch("list_users").then(e=>{this.users.push([...e])})},methods:{deleteUser(e){this.$store.dispatch("delete_user",{id:e}).then(()=>{this.users=[],this.$store.dispatch("list_users").then(e=>{this.users.push([...e])})})}}},G=D,J=Object(g["a"])(G,B,M,!1,null,null,null);J.options.__file="user-list.vue";var z=J.exports;_()(J,{VContent:S["a"]});var Y={name:"App",components:{"app-login":P,"app-register":N,"app-userdata":z},computed:{loggedIn(){return this.$store.getters.loggedIn}},methods:{logout(){this.$store.commit("destroyToken"),this.$router.push("/login")}}},H=Y,K=(r("034f"),r("7496")),Q=r("553a"),W=Object(g["a"])(H,p,d,!1,null,null,null);W.options.__file="App.vue";var X=W.exports;_()(W,{VApp:K["a"],VBtn:y["a"],VContent:S["a"],VFlex:T["a"],VFooter:Q["a"],VLayout:R["a"],VSpacer:C["a"],VToolbar:$["a"],VToolbarItems:O["a"],VToolbarTitle:O["b"]});var Z=r("2f62");a["a"].use(Z["a"]);const ee=new Z["a"].Store({state:{token:localStorage.getItem("access_token")||null},getters:{loggedIn(e){return null!==e.token}},mutations:{destroyToken(){this.state.token=null,localStorage.removeItem("access_token")}},actions:{login(e,t){return new Promise((e,r)=>{l.a.post("http://localhost:3000/users/login",{username:t.username,password:t.password}).then(t=>{const r=t.data.signinToken;localStorage.setItem("access_token",r),this.state.token=localStorage.getItem("access_token"),e(t)}).catch(e=>{r(e)})})},list_users(){return new Promise((e,t)=>{l.a.get("http://localhost:3000/users",{headers:{authentication:`Bearer ${localStorage.getItem("access_token")}`,username:localStorage.getItem("user_name")}}).then(t=>{e(t.data.users)}).catch(e=>{t(e)})})},register(e,t){return new Promise((e,r)=>{l.a.post("http://localhost:3000/users/register",{name:t.name,email:t.email,username:t.username,password:t.password}).then(t=>e(t)).catch(e=>r(e))})},delete_user(e,t){return new Promise((e,r)=>{l.a.delete("http://localhost:3000/users",{headers:{authentication:`Bearer ${localStorage.getItem("access_token")}`},data:{userId:t.id}}).then(t=>e(t)).catch(e=>r(e))})}}});var te=ee;a["a"].use(c["a"]),a["a"].use(n["a"]),a["a"].use(u.a,l.a);const re=[{path:"/login",component:P,beforeEnter:(e,t,r)=>{localStorage.getItem("access_token")?r("/userlist"):r()}},{path:"/register",component:N,beforeEnter:(e,t,r)=>{localStorage.getItem("access_token")?r({path:"/userlist"}):r()}},{path:"/userlist",component:z,meta:{requiresAuth:!0},beforeEnter:(e,t,r)=>{localStorage.getItem("access_token")?r():r({path:"/login"})}}],ae=new n["a"]({routes:re});a["a"].config.productionTip=!1,new a["a"]({store:te,router:ae,render:e=>e(X)}).$mount("#app")}});
//# sourceMappingURL=app.1295a738.js.map